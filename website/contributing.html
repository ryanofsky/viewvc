<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<title>ViewCVS: Contributing</title>
<link rel="stylesheet" type="text/css" href="./styles.css"/>
</head>

<body>

<div id="title">
<a href="http://viewcvs.sourceforge.net/"><img 
   src="./images/title.jpg" alt="ViewCVS: Repository Browsing"/></a>
</div>

<div id="menu">
<p><a href="./index.html">Home</a> |
   <a href="http://sourceforge.net/projects/viewcvs/">Project Page</a> |
   <a href="./download.html">Download</a> |
   <a href="./upgrading.html">Upgrading</a> |
   <a href="./contributing.html">Contributing</a> |
   <a href="./license-1.html">License</a> |
   <a href="./contact.html">Contact</a> |
   <a href="./who.html">About</a>
</p>
</div>

<table id="pagetable">
<tr>
<td id="pagecolumn1">

<h4>On this page:</h4>

<ul id="bookmarks">
  <li><a href="#sec-getting-started">Getting Started</a></li>
  <li><a href="#sec-testing">Testing and Reporting</a></li>
  <li><a href="#sec-coding-style">Coding Style</a></li>
  <li><a href="#sec-patches">Submitting Patches</a></li>
  <li><a href="#sec-security">Security</a></li>
  <li><a href="#sec-adding-features">Adding Features</a></li>
  <li><a href="#sec-templates">Hacking on Templates</a></li>
  <li><a href="#sec-releasing">Release Management</a></li>
</ul>

<hr/>

<p align="center"><a href="http://sourceforge.net/"><img
   src="http://sourceforge.net/sflogo.php?group_id=18760&type=2"></a></p>

<address><a href="mailto:viewcvs@lyra.org">ViewCVS Users Group</a></address>

</td>
<td id="pagecolumn2">

<div class="section">

<h2 id="sec-getting-started">Getting Started</h2>

<p>Some basic knowledge about <a
   href="http://www.python.org">Python</a> and development tools like
   <code>diff</code> is required.  Your best bet is to start with a
   fresh source code snapshot, which you may obtain from our <a
   href="http://sourceforge.net/cvs/?group_id=18760">CVS Repository</a>
   at SourceForge.</p>

</div>
<div class="section">

<h2 id="sec-testing">Testing and Reporting</h2>

<p>Testing usability and the installation process on different
   platforms is also a valuable contribution.  Please report your
   results back to us developers.  Bandwidth is getting cheaper daily,
   so don't be afraid &mdash; in fact, feel encouraged &mdash; to dump
   as much detail about the problems you are seeing as possible into
   your bug reports.  Here are some things you definitely should
   try to include:</p>

<ul>

  <li>What version of ViewCVS you are using (if you are using a source
  snapshot, tell us the date of that snapshot).</li>

  <li>What operating system your ViewCVS is running on.</li>

  <li>What version of Python you are using.</li>

  <li>Whether you are running ViewCVS standalone, or as a CGI program
      under a web server (and if so, what web server).</li>

  <li>The URL of your ViewCVS instantiation, if it is public.
      Sometimes, letting developers see the problem for themselves can
      save everyone alot of time.</li>

</ul>

</div>
<div class="section">
      
<h2 id="sec-coding-style">Coding Style</h2>

<p>Maintain whatever style is present in the code being modified.  New
   code can use anything sane (which generally means <a
   href="http://python.sourceforge.net/peps/pep-0008.html">PEP&nbsp;8</a>).
   Our only real peeve is if someone writes a function call as:
   <code>some_func&nbsp;(args)</code> &mdash; that space between the
   function name and opening parenthesis is Huge Badness.  Oh, and we
   do <strong>not</strong> use CVS keyword macros (such as
   <code>$</code><code>Id$</code>) within the source.</p>

<p>Otherwise&hellip; <em>shrug</em>.</p>

</div>
<div class="section">

<h2 id="sec-patches">Submitting Patches</h2>

<p>Nothing speaks more loudly when bugs or features are the topic than
   a patch.  And quite frankly, sometimes if you want something done,
   you gotta do it yourself.  So, patches are always welcome.  If you
   aren't sure what exactly a &quot;patch&quot; is, or don't know how
   to generate one, but you've got code contributions to make, please
   don't hesitate to ask questions on the mailing lists.  Patch
   generation and application are pretty easy thing to get the hang of,
   and drastically simplify code submission and review.</p>

<p>Please use the <a
   href="http://sourceforge.net/tracker/?func=add&group_id=18760&atid=318760">SourceForge
   patch manager</a> to submit your patches.  Unified contextual diffs
   against the latest development snapshot are preferred.</p>

<p>If you have commit access, then you should know what you're doing.
   Just make changes directly.  Subscribing to the <a
   href="http://mailman.lyra.org/mailman/listinfo/viewcvs-dev">developer
   mailing list</a> is recommended in any case.</p>

</div>
<div class="section">

<h2 id="sec-security">Security</h2>

<p>Since ViewCVS is used on the Internet, security is a major concern.
   If you need to pass data from the request into an external program,
   please don't use <code>os.system()</code> or
   <code>os.popen()</code>.  Please use the module
   <code>lib/popen.py</code> that is included in the ViewCVS
   distribution instead.</p>

</div>
<div class="section">

<h2 id="sec-adding-features">Adding Features</h2>

<p>If you need a new configuration option think carefully, into which
   section it belongs.  Try to keep the content of
   <code>cgi/viewcvs.conf.dist</code> file and the library module
   <code>lib/config.py</code> in sync.</p>

<p>The library subdirectory contains a module <code>debug.py</code>,
   which you may find useful for performance testing.</p>

<p>If a new file or module is added, a new line in the installer
   program <code>viewcvs-install</code> is required.</p>

</div>
<div class="section">

<h2 id="sec-templates">Hacking on Templates</h2>

<p>The library module <code>ezt.py</code> contains a module docstring
   which describes the directives used in the HTML templates used by
   ViewCVS.  The templates themselves can be found in the
   <code>templates</code> subdirectory.</p>

</div>
<div class="section">

<h2 id="sec-releasing">Release Management</h2>

<p>There is a script, <code>tools/make-release</code>, which creates a
   release directory and the various archive files that we distribute.
   All other steps required to get a ViewCVS release out of the door
   require manual execution (currently by Greg Stein).  Those steps
   are as follows:</p>

<ol>

  <li>Add a new subsection to the file
      <code>website/upgrading.html</code> describing all user visible
      changes for users of previous releases of ViewCVS.</li>

   <li>Update the <code>CHANGES</code> file</li>

   <li>Update the <code>website/index.html</code> file to refer to the
       new X.Y files. (there are three links to update)</li>

   <li>Edit the file <code>lib/viewcvs.py</code> and remove the
       <tt>"-dev"</tt> suffix from <code>__version__</code>.  The
       remainder should be of the form X.Y, where X is a positive
       number and Y is a single digit.</li>

   <li>Ensure all of the above changes have been committed.</li>

   <li>Test, Test, Test!  At the time of this writing (1.0-dev) there
       is no automatic testsuite available.  So just run with
       permuting different <code>viewcvs.conf</code> settings&hellip;
       and pray.</li>

   <li>Review any <a
       href="http://sourceforge.net/tracker/?atid=118760&group_id=18760&func=browse">
       bug reports, that are still marked open.</a></li>

   <li>Run <code>cvs tag V<i>X</i>_<i>Y</i></code>, where
       <i>X</i> and <i>Y</i> should be replaced by the release number
       from above.  If a developer is willing to volunteer as a bug
       fix patch release manager, it is now possible to start here at
       this point with a feature freezed branch using <code>cvs tag -b
       V<i>X</i>_<i>Y</i>_maint</code></li>

   <li>Go into an empty directory and run <code>tools/make-release
       V<i>X_Y</i> viewcvs-<i>X.Y</i></code>.  This step requires
       anonymous CVS access to repository at SourceForge.</li>

   <li>Pack the content of this <code>viewcvs-</code><i>X.Y</i>
       directory into a tarball.</li>

   <li>Upload the created tarball into the download files section of
       the ViewCVS project at SourceForge:</li>

     <ul>
       <li><code>scp viewcvs-X.Y.*
           <var>USERNAME</var>@viewcvs.sourceforge.net:/home/groups/v/vi/viewcvs/htdocs</code></li>

       <li>ssh to viewcvs.sourceforge.net, cd to the above directory,
           and do a "<code>cvs update</code>" to pull down the latest
           website files.</li>

       <li>ftp to upload.sourceforge.net, cd to the
           <code>/incoming</code> directory, and upload the .gz and the
           .zip</li>

       <li>go to the Admin pages for the ViewCVS project, and go to
           "Edit/Release Files"</li>

       <li>select "Add Release" and fill in the new release name
           (X.Y)</li>

       <li>fill in the Change Log section with the relevant portion from
           the <code>CHANGES</code> file and select the "Preserve my
           pre-formatted text" option. (and Submit those changes)</li>

       <li>the files uploaded to upload.sourceforge.net should appear in
           the "Add Files To This Release" section. Select them, and add
           them.</li>

       <li>for each file: change the processor type to "Any", select
           "Source .zip" or "Source .gz" as appropriate, and hit the
           Update button. (note: you need to Update each file
           separately)</li>

       <li>after about 15-30 minutes, the files will appear on the Files
           page of the project.</li>

       <li>select the "I'm sure" button and hit the "Send Notice"
           button.</li>

       <li>NOTE: if you need to hide a prior release, then go back to
           the admin page and follow the links for editing a
           release. Change the "Status" drop-down to "Hidden" and
           submit the change.</li>

     </ul>

   <li>Edit the file <code>lib/viewcvs.py</code> again and this time
       increment the <code>__version__</code> for the next release
       cycle, again append the <code>-dev</code> to the version and
       again <code>cvs commit -m "new release cycle begins"
       lib/viewcvs.py</code>.</li>

   <li>Write an announcement explaining all the cool new features and
       put it out to:</li>

       <ul>

         <li><a href="http://www.freshmeat.net">Freshmeat</a></li>

         <li><a
             href="http://www.vex.net/parnassus/apyllo.py?i=91022454">Vaults
             of Parnassus</a></li>

         <li><a href="news:comp.lang.python">comp.lang.python</a></li>

         <li><i>Others?  Suggestions welcome.</i></li>

       </ul>

</ol>

</div>

</td>
</tr>
</table>
</body>
</html>
